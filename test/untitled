{
  "name": "北森-fish",
  "description": "北森-fish",
  "logoUrl": "beisenLogo",
  "scope": "PUBLIC",
  "status": "ACTIVE",
  "appType": "APP",
  "version": "v2",
  "protocol": "CUSTOM",
  "types": [
    "SSO"
  ],
  "config": {
    "appInfo": {
      "defaultDisplayName": "beisen-fish",
      "defaultVariableName": "beisen-fish"
    },
    "ssoConfig": {
      "statusCache": {
        "onlyWrite": "CUSTOM"
      },
      "protocol": [
        {
          "name": "CUSTOM",
          "appName": "Beisen",
          "displayName": "Beisen-fish",
          "fixedKeyId": "1ce07519e3a8565e012621ec361f61c35b2cf39d",
          "config": {},
          "subjectKeyInToken": "sub",
          "keyConfig": {
            "needToCreateKey": false,
            "keyType": "RSA256"
          }
        }
      ],
      "defaultMappings": [
        {
          "objectType": "USER",
          "sourceVariableName": "username",
          "sourceDataType": "STRING",
          "targetVariableName": "sub",
          "targetDataType": "STRING",
          "isScript": false,
          "scriptContent": "",
          "key": 0
        }
      ],
      "defaultObjectSchema": [
        {
          "objectType": "USER",
          "variableName": "NameID",
          "displayName": "账号",
          "description": "用户登录使用的账号",
          "dataType": "STRING",
          "key": 0
        }
      ]
    }
  },
  "dynamicForm": {
    "customConfig": {
      "availableVariable": {
        "btnLoading": false,
        "jobStage": "",
        "changingSecret": true
      }
    },
    "defaultFirstStep": true,
    "steps": [
      {
        "stepNumber": 1,
        "stepKey": "sso_setting",
        "title": "登录信息",
        "tabIndex": 2,
        "tabTitle": "登录设置",
        "formProps": {
          "layout": "horizontal"
        },
        "itemProps": {
          "labelCol": {
            "span": 6
          },
          "wrapperCol": {
            "span": 18
          }
        },
        "components": [
          {
            "category": "input",
            "refPath": [
              "ssoConfig",
              "statusCache",
              "protocol",
              "tenantId"
            ],
            "attributes": {
              "type": "input",
              "dynamicLabel": true,
              "calculate": [
                {
                  "external": false,
                  "protocols": [
                    "ssoConfig",
                    "protocol"
                  ],
                  "currentProtocol": [
                    "ssoConfig",
                    "statusCache",
                    "protocol",
                    "name"
                  ],
                  "isSecret": false,
                  "fnId": "getTextInAppSSOConfig"
                }
              ],
              "placeholder": ""
            },
            "status": {
              "disabled": false
            },
            "decoratorOption": {
              "rules": [
                {
                  "required": true,
                  "whitespace": true,
                  "message": "请输入%s"
                }
              ]
            },
            "fieldProps": {
              "label": "%s"
            }
          },
          {
            "category": "input",
            "refPath": [
              "ssoConfig",
              "statusCache",
              "protocol",
              "secret"
            ],
            "attributes": {
              "type": "input_switch_password",
              "dynamicLabel": true,
              "calculate": [
                {
                  "external": false,
                  "protocols": [
                    "ssoConfig",
                    "protocol"
                  ],
                  "currentProtocol": [
                    "ssoConfig",
                    "statusCache",
                    "protocol",
                    "name"
                  ],
                  "keyLabelMap": {
                    "corpId": "CorpId",
                    "apiKey": "apikey"
                  },
                  "isSecret": true,
                  "fnId": "getTextInAppSSOConfig"
                }
              ],
              "placeholder": ""
            },
            "status": {
              "disabled": false,
              "fakeValueFlag": [
                "ssoConfig",
                "statusCache",
                "updatedSSOWithTrue"
              ]
            },
            "decoratorOption": {
              "rules": [
                {
                  "required": true,
                  "whitespace": true,
                  "message": "请输入%s"
                }
              ]
            },
            "fieldProps": {
              "label": "%s"
            },
            "actionType": "changingSSOSecret"
          },
          {
            "category": "test_sso",
            "button": {
              "category": "button",
              "visibility": true,
              "attributes": {
                "type": "default",
                "label": "测试"
              },
              "validateFields": [
                [
                  "ssoConfig",
                  "statusCache",
                  "protocol",
                  "tenantId"
                ]
              ],
              "action": "testInstanceSSO"
            }
          },
          {
            "category": "divider",
            "visibility": true
          },
          {
            "category": "button_group",
            "visibility": true,
            "components": [
              {
                "category": "button",
                "visibility": true,
                "attributes": {
                  "type": "default",
                  "label": "取消"
                },
                "action": "cancel"
              },
              {
                "category": "button",
                "visibility": true,
                "attributes": {
                  "type": "default",
                  "label": "上一步"
                },
                "status": {
                  "disabled": false
                },
                "validateFields": [],
                "action": "preStep"
              },
              {
                "category": "button",
                "visibility": true,
                "attributes": {
                  "type": "primary",
                  "label": "确认并启用",
                  "isLoadingButton": true
                },
                "status": {
                  "loading": [
                    {
                      "external": true,
                      "refPath": "btnLoading"
                    }
                  ],
                  "disabled": [
                    {
                      "tenantIdRefPath": [
                        "ssoConfig",
                        "statusCache",
                        "protocol",
                        "tenantId"
                      ],
                      "secreate": "refPath",
                      "fnId": "getSSOBtnDisabledStatus"
                    }
                  ]
                },
                "validateFields": [
                  [
                    "ssoConfig",
                    "statusCache",
                    "protocol",
                    "tenantId"
                  ]
                ],
                "action": "submitInstanceWithSSO"
              }
            ]
          }
        ]
      }
    ]
  }
}